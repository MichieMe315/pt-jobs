{% extends "base.html" %}
{% block title %}Applications · {{ job.title }}{% endblock %}
{% block content %}
<div class="container my-4">
  <h1 class="h4 mb-3">Applications — {{ job.title }}</h1>
  <div class="text-muted mb-3">{{ job.employer.company_name|default:job.employer.name }} · {{ job.location }}</div>

  {% if applications %}
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>Applicant</th>
            <th>Email</th>
            <th>Position desired</th>
            <th>Submitted</th>
            <th>Status</th>
            <th>Resume</th>
          </tr>
        </thead>
        <tbody>
          {% for app in applications %}
            <tr>
              <td>{{ app.jobseeker.full_name }}</td>
              <td><a href="mailto:{% if app.jobseeker.email %}{{ app.jobseeker.email }}{% endif %}">{{ app.jobseeker.email }}</a></td>
              <td>{{ app.jobseeker.position_desired|default:"—" }}</td>
              <td>{{ app.created_at|date:"Y-m-d H:i" }}</td>
              <td>{{ app.get_status_display }}</td>
              <td>
                {% if app.resume %}
                  <a href="{{ app.resume.url }}" target="_blank">Download</a>
                {% elif app.jobseeker.resume %}
                  <a href="{{ app.jobseeker.resume.url }}" target="_blank">Download (on file)</a>
                {% else %}
                  —
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>No applications yet.</p>
  {% endif %}
</div>
{% endblock %}
