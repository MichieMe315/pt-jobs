{% extends "base.html" %}
{% block title %}Preview Job · PT Jobs{% endblock %}
{% block content %}
<div class="container my-4" style="max-width: 900px;">
  <h1 class="mb-4">Preview Job</h1>

  <div class="card mb-4">
    <div class="card-body">
      <h3 class="card-title">{{ job.title }}</h3>
      <p class="text-muted mb-1">
        {{ job.location }}
        {% if job.job_type %} · {{ job.get_job_type_display }}{% endif %}
      </p>
      <hr/>
      <h5>Description</h5>
      <div class="mb-3">{{ job.description|linebreaks }}</div>

      <div class="row">
        <div class="col-md-4">
          <strong>Compensation:</strong>
          {% if job.compensation_type %} {{ job.get_compensation_type_display }}{% else %} — {% endif %}
        </div>
        <div class="col-md-4">
          <strong>Min:</strong> {{ job.salary_min|default:"—" }}
        </div>
        <div class="col-md-4">
          <strong>Max:</strong> {{ job.salary_max|default:"—" }}
        </div>
      </div>
      {% if job.percent_split %}
      <div class="mt-2"><strong>Percent split:</strong> {{ job.percent_split }}%</div>
      {% endif %}

      {% if job.application_email %}
      <div class="mt-3"><strong>Application email:</strong> {{ job.application_email }}</div>
      {% endif %}
      {% if job.external_apply_url %}
      <div class="mt-2"><strong>External apply URL:</strong> {{ job.external_apply_url }}</div>
      {% endif %}
      {% if job.application_instructions %}
      <div class="mt-2">
        <strong>Application instructions:</strong>
        <div>{{ job.application_instructions|linebreaks }}</div>
      </div>
      {% endif %}

      <div class="mt-3">
        <strong>Relocation assistance:</strong> {{ job.relocation_assistance_provided|yesno:"Yes,No" }}
      </div>
      <div><strong>Expires:</strong> {{ job.expiry_date }}</div>
    </div>
  </div>

  <!-- Repost same data to publish -->
  <form method="post" action="{{ post_url }}">
    {% csrf_token %}
    {% for k, v in form_data.items %}
      {% if k != "preview" %}
        <input type="hidden" name="{{ k }}" value="{{ v|default_if_none:'' }}">
      {% endif %}
    {% endfor %}
    <input type="hidden" name="confirm_publish" value="1">
    <div class="d-flex gap-2">
      <a href="javascript:history.back()" class="btn btn-outline-secondary">Back</a>
      <button class="btn btn-primary">Publish job</button>
    </div>
  </form>
</div>
{% endblock %}
