{% extends "base.html" %}
{% block title %}Job Seeker Dashboard{% endblock %}

{% block content %}
<div class="container py-4">

  <div class="mb-3">
    <h1 class="h4 mb-1">Job Seeker Dashboard</h1>
    <p class="mb-0">Welcome, {{ jobseeker.first_name }} {{ jobseeker.last_name }}.</p>
  </div>

  <ul class="nav nav-tabs">
    <li class="nav-item">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#resumes">
        My Resumes
      </button>
    </li>
    <li class="nav-item">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#applications">
        My Applications
      </button>
    </li>
  </ul>

  <div class="tab-content pt-3">

    <div class="tab-pane fade show active" id="resumes">
      <div class="card mb-3">
        <div class="card-body">
          <h2 class="h6 mb-3">Upload Resume</h2>

          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="file" name="file" class="form-control mb-2" required>
            <button class="btn btn-primary">Upload</button>
          </form>
        </div>
      </div>

      <div class="card">
        <div class="card-body">
          <h2 class="h6 mb-3">My Resumes</h2>

          {% if resumes %}
            <ul class="list-group list-group-flush">
              {% for r in resumes %}
                <li class="list-group-item d-flex justify-content-between">
                  <div>
                    {{ r.file.name }}<br>
                    <small class="text-muted">Uploaded {{ r.created_at|date:"M j, Y" }}</small>
                  </div>
                  <a href="{{ r.file.url }}" target="_blank" class="btn btn-sm btn-outline-secondary">View</a>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="mb-0">You haven't uploaded any resumes yet.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="applications">
      <div class="card">
        <div class="card-body">
          <h2 class="h6 mb-3">My Applications</h2>

          {% if applications %}
            <ul class="list-group list-group-flush">
              {% for app in applications %}
                <li class="list-group-item">
                  <strong>{{ app.job.title }}</strong><br>
                  <small class="text-muted">
                    {{ app.job.employer.company_name }} Â· {{ app.job.location }}<br>
                    Applied {{ app.created_at|date:"M j, Y" }}
                  </small>
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="mb-0">You haven't applied to any jobs yet.</p>
          {% endif %}
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
