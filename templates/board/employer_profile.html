{% extends "base.html" %}
{% block title %}{{ employer.company_name|default:employer.name }} · Employer Profile{% endblock %}
{% block content %}
<div class="container my-4">
  <div class="d-flex align-items-center mb-3">
    {% if employer.logo %}
      <img src="{{ employer.logo.url }}" alt="{{ employer.company_name|default:employer.name }}" class="me-3" style="width:64px;height:64px;border-radius:12px;object-fit:cover;">
    {% endif %}
    <div>
      <h1 class="h3 m-0">{{ employer.company_name|default:employer.name }}</h1>
      <div class="text-muted">{{ employer.location }}</div>
      {% if employer.website %}
        <div><a href="{{ employer.website }}" target="_blank" rel="noopener">Website</a></div>
      {% endif %}
    </div>
  </div>

  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">Overview</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#jobs" type="button" role="tab">Open Jobs</button>
    </li>
  </ul>

  <div class="tab-content mt-3">
    <div class="tab-pane fade show active" id="overview" role="tabpanel">
      <p>{{ employer.description|linebreaks }}</p>
    </div>

    <div class="tab-pane fade" id="jobs" role="tabpanel">
      {% if open_jobs %}
        <div class="list-group">
          {% for job in open_jobs %}
            <a href="{% url 'job_detail' job.id %}" class="list-group-item list-group-item-action">
              <div class="d-flex justify-content-between">
                <div>
                  <div class="fw-bold">{{ job.title }}</div>
                  <div class="text-muted small">{{ job.location }}{% if job.job_type %} · {{ job.get_job_type_display }}{% endif %}</div>
                </div>
                <div class="text-muted small">
                  Posted {{ job.posting_date }}
                </div>
              </div>
              {% if job.compensation_type %}
                <div class="small">
                  {{ job.get_compensation_type_display }}:
                  {% if job.salary_min %}${{ job.salary_min|floatformat:-2 }}{% endif %}
                  {% if job.salary_min and job.salary_max %} – {% endif %}
                  {% if job.salary_max %}${{ job.salary_max|floatformat:-2 }}{% endif %}
                </div>
              {% endif %}
            </a>
          {% endfor %}
        </div>
      {% else %}
        <p>No open jobs.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
