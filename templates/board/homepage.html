{% extends "base.html" %}
{% block title %}PT Jobs — Home{% endblock %}
{% block content %}
<div class="container">
  <!-- Hero -->
  <div class="row align-items-center g-3 mb-4">
    <div class="col-lg-8">
      <h1 class="mb-2">Find your next physiotherapy job</h1>
      <p class="text-muted mb-3">Browse the latest postings across Canada. Employers can post jobs in minutes.</p>
      <div class="d-flex gap-2">
        <a href="{% url 'job_list' %}" class="btn btn-primary">Browse Jobs</a>
        <a href="{% url 'package_list' %}" class="btn btn-outline-secondary">Post a Job</a>
      </div>
    </div>
  </div>

  <!-- Featured -->
  <h2 class="h4 mb-2">Featured Jobs</h2>
  {% if featured_jobs %}
    <div class="row g-3 mb-4">
      {% for job in featured_jobs %}
        <div class="col-md-6 col-lg-4">
          <a class="card h-100 text-decoration-none" href="{% url 'job_detail' job.id %}">
            <div class="card-body d-flex gap-3">
              {% if job.employer.logo %}
                <img src="{{ job.employer.logo.url }}" alt=""
                     style="width:56px;height:56px;object-fit:cover;border-radius:10px;">
              {% else %}
                <div style="width:56px;height:56px;border-radius:10px;background:#3a3f44;display:flex;align-items:center;justify-content:center;">
                  <span class="text-muted small">No<br>Logo</span>
                </div>
              {% endif %}
              <div class="flex-grow-1">
                <div class="d-flex align-items-center gap-2 flex-wrap">
                  <h5 class="card-title mb-0">{{ job.title }}</h5>
                  <span class="badge text-bg-warning">Featured</span>
                </div>
                <div class="text-muted small mt-1">
                  {{ job.employer.company_name|default:job.employer.name }} • {{ job.location }}
                </div>
                <div class="small mt-1">
                  {% if job.compensation_type == "hourly" %}
                    {% if job.salary_min or job.salary_max %}
                      <span class="badge text-bg-secondary">
                        ${{ job.salary_min|default_if_none:"" }}{% if job.salary_min and job.salary_max %}–{% endif %}{{ job.salary_max|default_if_none:"" }}/hour
                      </span>
                    {% endif %}
                  {% endif %}
                  {% if job.compensation_type == "yearly" %}
                    {% if job.salary_min or job.salary_max %}
                      <span class="badge text-bg-secondary">
                        ${{ job.salary_min|default_if_none:"" }}{% if job.salary_min and job.salary_max %}–{% endif %}{{ job.salary_max|default_if_none:"" }}/year
                      </span>
                    {% endif %}
                  {% endif %}
                  {% if job.compensation_type == "percent" %}
                    {% if job.percent_split %}
                      <span class="badge text-bg-secondary">{{ job.percent_split }}% split</span>
                    {% endif %}
                  {% endif %}
                </div>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-secondary">No featured jobs yet.</div>
  {% endif %}

  <!-- Latest -->
  <h2 class="h4 mb-2">Latest Jobs</h2>
  {% if latest_jobs %}
    <div class="list-group">
      {% for job in latest_jobs %}
        <a href="{% url 'job_detail' job.id %}" class="list-group-item list-group-item-action py-3">
          <div class="d-flex align-items-center gap-3">
            {% if job.employer.logo %}
              <img src="{{ job.employer.logo.url }}"
                   alt="{{ job.employer.company_name|default:job.employer.name }}"
                   style="width:48px;height:48px;object-fit:cover;border-radius:10px;flex:0 0 48px;">
            {% else %}
              <div style="width:48px;height:48px;border-radius:10px;background:#3a3f44;display:flex;align-items:center;justify-content:center;flex:0 0 48px;">
                <span class="text-muted small">No<br>Logo</span>
              </div>
            {% endif %}
            <div class="flex-grow-1">
              <div class="d-flex align-items-center gap-2 flex-wrap">
                <strong>{{ job.title }}</strong>
                {% if job.featured %}<span class="badge text-bg-warning">Featured</span>{% endif %}
              </div>
              <div class="text-muted small mt-1">
                {{ job.employer.company_name|default:job.employer.name }} • {{ job.location }} • {{ job.posting_date|date:"M j, Y" }}
              </div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-secondary">No recent jobs yet.</div>
  {% endif %}
</div>
{% endblock %}
